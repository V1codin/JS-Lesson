!function(t){var e={};function a(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){a(1);class r{constructor(t){this.localHistory=[],this.checker(t)}addNumber(t,e){this.localHistory.push(t),localStorage.setItem("number "+e,t)}extractData(){for(let t in localStorage)t.includes("number")&&this.localHistory.push(localStorage[t])}render(t){for(let e=0;e<this.localHistory.length;e++)t.historyData.updateHistory(t,this.localHistory[e]);t.outDataContainer.style="display: block",t.historyDataContainer.style="display: block"}checker(t){localStorage.length>0&&(this.extractData(),this.render(t))}clearData(){this.localHistory.length=0,localStorage.clear()}}class i{renderResult(t,e){e.innerHTML=null;const{Status:a,CitySender:r,CityRecipient:i}=t,n=document.createElement("p");n.innerHTML="Статус: "+a;const s=document.createElement("p");s.innerHTML=`Маршрут: ${r} - ${i}`,e.appendChild(n),e.appendChild(s),e.style="display:block"}}class n{constructor(){this.historyCounter=0,this.dataObj={links:[],linkNames:{}}}updateHistory(t,e){const{dataInput:a}=t,r=a.value,i=document.createElement("a");i.className="list_link",i.onclick=e=>{t.request.getTrackingData(t,e.target.name).then(e=>(t.displayData(e),a.value=r,e))},i.name=e||r,this.historyCounter++,this.dataObj.linkNames[i.name]=i.name,i.id="history_link_"+this.historyCounter,i.href="#out";const n=document.createElement("li");n.className="list_element",n.id="history_element_№_"+this.historyCounter,this.dataObj.links.push(i),i.innerHTML+=e?"ЕН посилки "+e:"ЕН посилки "+r,t.historyList.insertBefore(n,t.historyList.firstChild).appendChild(i),e||t.localData.addNumber(i.name,this.historyCounter)}clearHistory(t){this.historyCounter=0,this.dataObj.links.length=0;for(let t in this.dataObj.linkNames)delete this.dataObj.linkNames[t];t.historyList.innerHTML=null,t.dataInput.value=null,t.outDataContainer.innerHTML=null,t.localData.clearData()}}class s{getTrackingData(t,e){const{apiKey:a,baseUrl:r,dataInput:i}=t;let n;return e?n=e:e||(n=i.value),fetch(r,{method:"POST",dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({apiKey:a,modelName:"TrackingDocument",calledMethod:"getStatusDocuments",methodProperties:{Documents:[{DocumentNumber:n}]}})}).then(t=>t.json())}}new class{constructor(t,e){const{inputId:a,submitButtonId:o,clearButtonId:l,outDataClass:u,historyDataClass:c,historyListClass:h}=t,{apiKey:d,baseUrl:y}=e;this.apiKey=d,this.baseUrl=y,this.dataInput=document.querySelector("#"+a),this.submitData=document.querySelector("#"+o),this.clearButton=document.querySelector("#"+l),this.outDataContainer=document.querySelector("."+u),this.historyDataContainer=document.querySelector("."+c),this.historyList=document.querySelector("."+h),this.historyData=new n,this.localData=new r(this),this.request=new s(this),this.renderer=new i,this.mask=/^\d{14}$/,this.submitData.onclick=()=>{this.validateNumber(this.dataInput.value)&&this.request.getTrackingData(this).then((t,e)=>{if(3!=t.data[0].StatusCode&&2!=t.data[0].StatusCode)return this.historyData.updateHistory(this),this.outDataContainer.style="display: block",this.historyDataContainer.style="display: block",t;throw new Error("Посилка з таким номером не знайдена")}).then(t=>(this.displayData(t),t)).catch(alert)},this.clearButton.onclick=()=>{this.historyData.clearHistory(this)}}validateNumber(t){if(t&&this.mask.test(t)){const t=this.dataInput.value;return!this.historyData.dataObj.linkNames.hasOwnProperty(t)||alert("Такий номер ТТН вже є в історії пошуку")}return this.dataInput.value=null,alert("Введіть коректний номер ТТН")}displayData(t){const{data:e}=t,a=e[0],r=a.Number;this.historyData.dataObj.links.forEach(t=>t.parentElement.id=""),this.historyData.dataObj.links.filter(t=>r===t.name)[0].parentElement.id="active",this.renderer.renderResult(a,this.outDataContainer)}}({inputId:"input-container_user-input",submitButtonId:"wrapper_submit-tracking",clearButtonId:"wrapper_clear-history",outDataClass:"container_out",historyDataClass:"container_history",historyListClass:"history_list"},{apiKey:"04ddf8bdb4d9138f496898f46480d4a2",baseUrl:"https://api.novaposhta.ua/v2.0/json/"})},function(t,e){console.log("index hi")}]);